<div id="submitjob">
    <script>
        function submitJob(){
            code = document.getElementById("code").value;
            kargs = document.getElementById("query").value;
            kargs = kargs.split("|");
            payload = { "code": code};
            kargs.forEach((args)=>{
                var p = args.split(":");
                payload[p[0]] = p[1];
                return;
            })
            
            console.log(payload);
            var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance 
                xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("demo").innerHTML = this.responseText;
                }
                };
            xmlhttp.open("POST", "/submitjob");
            xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xmlhttp.send(JSON.stringify(payload));
        }
    </script>

    <h1 class="page-header">
        Submit Job
    </h1>

    <div class="form-group">
        <label for="query">Sbatch Parameters</label>
        <input type="text" class="form-control" id="query">

    </div>    
     <div class="form-group">
        <label for="command">Command:</label>
            <textarea class="form-control" rows="20" cols="80" id="code"></textarea>
            <p id="demo" rows="20" cols="80" name="demo"/>
        
        <br>
        <button type="submit" class="btn btn-primary btn-block" onclick="submitJob()">Submit</button>
    </div> 
</div>  